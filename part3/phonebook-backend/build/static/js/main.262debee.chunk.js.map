{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","filter","onFilterChange","value","onChange","PersonForm","onFormSubmit","onNameChange","nameValue","onNumberChange","numberValue","onSubmit","type","Person","person","handleDelete","key","name","number","onClick","id","Persons","persons","toLowerCase","includes","map","filteredPerson","Notification","successMessage","errorMessage","className","baseUrl","axios","get","then","res","data","newObject","post","put","delete","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","setSuccessMessage","setErrorMessage","useEffect","personService","allPersons","catch","err","alert","e","target","preventDefault","existingPerson","find","window","confirm","changedPerson","returnedPerson","setTimeout","p","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.262debee.chunk.js","sourcesContent":["import React from \"react\";\n\nfunction Filter({ filter, onFilterChange }) {\n  return (\n    <div>\n      Filter shown with <input value={filter} onChange={onFilterChange} />\n    </div>\n  );\n}\n\nexport default Filter;\n","import React from \"react\";\n\nfunction PersonForm({\n  onFormSubmit,\n  onNameChange,\n  nameValue,\n  onNumberChange,\n  numberValue,\n}) {\n  return (\n    <form onSubmit={onFormSubmit}>\n      <h2>Add a new</h2>\n      <div>\n        Name: <input onChange={onNameChange} value={nameValue} />\n      </div>\n      <div>\n        Number: <input onChange={onNumberChange} value={numberValue} />\n      </div>\n      <div>\n        <button type=\"submit\">Add</button>\n      </div>\n    </form>\n  );\n}\n\nexport default PersonForm;\n","import React from \"react\";\n\nfunction Person({ person, handleDelete }) {\n  return (\n    <p key={person.name}>\n      {person.name} {person.number}\n      &nbsp;<button onClick={() => handleDelete(person.id)}>Delete</button>\n    </p>\n  );\n}\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nfunction Persons({ persons, filter, handleDelete }) {\n  return (\n    <div>\n      {persons\n        .filter((person) =>\n          person.name.toLowerCase().includes(filter.toLowerCase())\n        )\n        .map((filteredPerson) => (\n          <Person\n            key={filteredPerson.name}\n            person={filteredPerson}\n            handleDelete={handleDelete}\n          />\n        ))}\n    </div>\n  );\n}\n\nexport default Persons;\n","import React from \"react\";\n\nconst Notification = ({ successMessage, errorMessage }) => {\n  if (!successMessage && !errorMessage) {\n    return null;\n  }\n\n  return (\n    <div className={`message ${successMessage ? \"success\" : \"error\"}`}>\n      {successMessage ? successMessage : errorMessage}\n    </div>\n  );\n};\n\nexport default Notification;\n","import axios from \"axios\"\nconst baseUrl = \"api/persons\"\n\nconst getAll = () => {\n  const req = axios.get(baseUrl)\n  return req.then((res) => res.data)\n}\n\nconst create = (newObject) => {\n  const req = axios.post(baseUrl, newObject)\n  return req.then((res) => res.data)\n}\n\nconst update = (id, newObject) => {\n  const req = axios.put(`${baseUrl}/${id}`, newObject)\n  return req.then((res) => res.data)\n}\n\nconst remove = (id) => {\n  const req = axios.delete(`${baseUrl}/${id}`)\n  return req.then((res) => res.data)\n}\n\nexport default {\n  getAll,\n  create,\n  update,\n  remove,\n}\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then((allPersons) => {\n        setPersons(allPersons);\n      })\n      .catch((err) => alert(err));\n  }, []);\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleFilterChange = (e) => {\n    setFilter(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (!newName || !newNumber) {\n      alert(\"Please fill in the fields\");\n      return;\n    }\n\n    // Person exists in the database\n    const existingPerson = persons.find(\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\n    );\n\n    if (existingPerson && existingPerson.number === newNumber) {\n      alert(`${newName} is already added to phonebook`);\n      setNewName(\"\");\n      setNewNumber(\"\");\n      return;\n    }\n\n    // Change number for exiting person in database\n    if (existingPerson && existingPerson.number !== newNumber) {\n      if (\n        window.confirm(\n          `${existingPerson.name} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const changedPerson = { ...existingPerson, number: newNumber };\n        const id = existingPerson.id;\n\n        personService\n          .update(id, changedPerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== id ? person : returnedPerson\n              )\n            );\n            setSuccessMessage(`Updated ${changedPerson.name}'s number`);\n            setTimeout(() => {\n              setSuccessMessage(null);\n            }, 5000);\n            setNewName(\"\");\n            setNewNumber(\"\");\n          })\n          .catch((err) => {\n            setErrorMessage(\n              `Information of ${changedPerson.name} has already been removed from server`\n            );\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n            setPersons(persons.filter((p) => p.id !== id));\n            setNewName(\"\");\n            setNewNumber(\"\");\n          });\n        return;\n      } else {\n        return;\n      }\n    }\n\n    // Create new person & send to database\n    const newPerson = { name: newName, number: newNumber };\n    personService\n      .create(newPerson)\n      .then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson));\n        setSuccessMessage(`Added ${returnedPerson.name}`);\n        setTimeout(() => {\n          setSuccessMessage(null);\n        }, 5000);\n        setNewName(\"\");\n        setNewNumber(\"\");\n      })\n      .catch((err) => alert(err));\n  };\n\n  const handleDelete = (id) => {\n    if (window.confirm(\"Do you really want to delete this person\")) {\n      personService\n        .remove(id)\n        .then((returnedPerson) => {\n          setPersons(persons.filter((person) => person.id !== id));\n        })\n        .catch((err) => alert(err));\n    } else {\n      return;\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        successMessage={successMessage}\n        errorMessage={errorMessage}\n      />\n      <Filter filter={filter} onFilterChange={handleFilterChange} />\n      <PersonForm\n        onFormSubmit={handleSubmit}\n        onNameChange={handleNameChange}\n        onNumberChange={handleNumberChange}\n        nameValue={newName}\n        numberValue={newNumber}\n      />\n\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} handleDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}